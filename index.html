<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hyper Browser</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
      background: #0f172a;
      color: #e5e7eb;
    }

    /* Tabs */
    .tab-strip {
      display: flex;
      gap: 6px;
      padding: 8px;
      background: #1f2933;
      overflow-x: auto;
    }
    .tab {
      padding: 4px 10px;
      border-radius: 8px;
      background: #334155;
      color: #e5e7eb;
      cursor: pointer;
      white-space: nowrap;
      font-size: 13px;
    }
    .tab.active {
      background: #4b5563;
      font-weight: 600;
    }
    .new-tab {
      padding: 4px 10px;
      border-radius: 8px;
      background: #0ea5e9;
      color: #020617;
      cursor: pointer;
      font-weight: 700;
    }

    /* Controls + address bar */
    .controls {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px;
      background: #111827;
    }

    .btn {
      width: 30px;
      height: 30px;
      border-radius: 6px;
      background: #1f2933;
      border: none;
      color: #e5e7eb;
      cursor: pointer;
      font-size: 16px;
    }
    .btn:disabled {
      opacity: 0.4;
      cursor: default;
    }

    .lock {
      font-size: 16px;
      cursor: default;
      user-select: none;
    }

    #urlInput {
      flex: 1;
      padding: 6px 10px;
      border-radius: 6px;
      border: none;
      background: #020617;
      color: #e5e7eb;
      outline: none;
      font-size: 14px;
    }

    iframe {
      flex: 1;
      width: 100%;
      border: none;
      background: #000;
    }
  </style>
</head>
<body>

  <!-- Tabs -->
  <div class="tab-strip" id="tabStrip"></div>

  <!-- Controls + address bar -->
  <div class="controls">
    <button class="btn" id="backBtn">âŸµ</button>
    <button class="btn" id="forwardBtn">âŸ¶</button>
    <button class="btn" id="reloadBtn">âŸ³</button>
    <span class="lock" id="lockIcon" title="This site is secure (HTTPS)">ðŸ”’</span>
    <input id="urlInput" type="text" placeholder="Search or enter URL..." />
  </div>

  <!-- Page area -->
  <iframe id="view" src="https://google.com"></iframe>

  <script>
    const TABS = [];
    let activeTab = null;

    const tabStrip   = document.getElementById("tabStrip");
    const urlInput   = document.getElementById("urlInput");
    const view       = document.getElementById("view");
    const backBtn    = document.getElementById("backBtn");
    const forwardBtn = document.getElementById("forwardBtn");
    const reloadBtn  = document.getElementById("reloadBtn");
    const lockIcon   = document.getElementById("lockIcon");

    // ---- Tabs ----
    function newTab(url) {
      const id = "tab-" + Math.random().toString(16).slice(2);
      const tab = {
        id,
        history: [url],
        index: 0,
        title: "New Tab",
      };
      TABS.push(tab);
      setActiveTab(id);
      renderTabs();
      load(url, false);
    }

    function setActiveTab(id) {
      activeTab = TABS.find(t => t.id === id);
      renderTabs();
      if (!activeTab) return;
      const currentUrl = activeTab.history[activeTab.index];
      load(currentUrl, false);
    }

    function renderTabs() {
      tabStrip.innerHTML = "";
      TABS.forEach(t => {
        const el = document.createElement("div");
        el.className = "tab" + (t === activeTab ? " active" : "");
        el.textContent = t.title;
        el.onclick = () => setActiveTab(t.id);
        tabStrip.appendChild(el);
      });

      const newBtn = document.createElement("div");
      newBtn.className = "new-tab";
      newBtn.textContent = "+";
      newBtn.onclick = () => newTab("https://google.com");
      tabStrip.appendChild(newBtn);
    }

    // ---- URL handling ----
    function normalizeUrl(input) {
      input = input.trim();
      if (!input) return "https://google.com";

      try {
        // Already a valid URL
        return new URL(input).toString();
      } catch {}

      // Looks like a bare domain
      if (/^[\w.-]+\.[a-z]{2,}$/i.test(input)) {
        return "https://" + input;
      }

      // Otherwise treat as Google search
      return "https://www.google.com/search?q=" + encodeURIComponent(input);
    }

    // ---- Navigation ----
    function load(raw, addHistory = true) {
      if (!activeTab) return;
      const url = normalizeUrl(raw);
      view.src = url;
      urlInput.value = url;
      updateSecurity(url);

      if (addHistory) {
        activeTab.history.splice(activeTab.index + 1);
        activeTab.history.push(url);
        activeTab.index = activeTab.history.length - 1;
      }
      updateButtons();
      updateTabTitleFromUrl(activeTab, url);
    }

    function updateButtons() {
      if (!activeTab) {
        backBtn.disabled = true;
        forwardBtn.disabled = true;
        reloadBtn.disabled = true;
        return;
      }
      backBtn.disabled = activeTab.index <= 0;
      forwardBtn.disabled = activeTab.index >= activeTab.history.length - 1;
      reloadBtn.disabled = activeTab.history.length === 0;
    }

    // ---- Security lock ----
    function updateSecurity(url) {
      const isSecure = url.startsWith("https://");
      lockIcon.textContent = isSecure ? "ðŸ”’" : "ðŸ”“";
      lockIcon.title = isSecure
        ? "This site is secure (HTTPS)"
        : "This site is not secure (uses plain HTTP)";
    }

    // Simple tab title from hostname
    function updateTabTitleFromUrl(tab, url) {
      try {
        const u = new URL(url);
        tab.title = (u.hostname || "Page").replace(/^www\./, "");
      } catch {
        tab.title = "Page";
      }
      renderTabs();
    }

    // ---- Button handlers ----
    backBtn.onclick = () => {
      if (!activeTab || activeTab.index <= 0) return;
      activeTab.index--;
      const url = activeTab.history[activeTab.index];
      load(url, false);
    };

    forwardBtn.onclick = () => {
      if (!activeTab || activeTab.index >= activeTab.history.length - 1) return;
      activeTab.index++;
      const url = activeTab.history[activeTab.index];
      load(url, false);
    };

    reloadBtn.onclick = () => {
      if (!activeTab) return;
      const url = activeTab.history[activeTab.index];
      load(url, false);
    };

    urlInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        load(urlInput.value, true);
      }
    });

    // ---- Init ----
    newTab("https://google.com");
  </script>
</body>
</html>
