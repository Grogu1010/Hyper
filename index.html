<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hyper Browser</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      height: 100vh;
      background: #020617;
      color: #e5e7eb;
      display: flex;
    }

    .browser {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: #020617;
    }

    /* Tabs */
    .tabs-row {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 4px 6px;
      background: #020617;
      border-bottom: 1px solid #111827;
      overflow-x: auto;
      scrollbar-width: none;
    }
    .tabs-row::-webkit-scrollbar {
      display: none;
    }

    .tab {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      background: #0b1120;
      color: #9ca3af;
      border: 1px solid transparent;
      font-size: 12px;
      cursor: pointer;
      max-width: 180px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      transition: background .12s ease, color .12s ease, border .12s ease;
    }

    .tab:hover {
      background: #111827;
      border-color: #1f2937;
      color: #e5e7eb;
    }

    .tab.active {
      background: #1f2937;
      color: #f9fafb;
      border-color: #4b5563;
    }

    .tab-title {
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .tab-close {
      font-size: 12px;
      opacity: 0.7;
      padding-left: 4px;
      flex-shrink: 0;
    }

    .tab-close:hover {
      opacity: 1;
    }

    .tab-new {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px dashed #4b5563;
      background: transparent;
      color: #9ca3af;
      font-size: 14px;
      cursor: pointer;
      flex-shrink: 0;
    }

    .tab-new:hover {
      background: #020617;
      color: #e5e7eb;
    }

    /* Controls + address bar */
    .controls {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 8px;
      background: #020617;
      border-bottom: 1px solid #111827;
    }

    .nav-buttons {
      display: flex;
      gap: 4px;
    }

    .btn {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      border: none;
      background: #0b1120;
      color: #e5e7eb;
      cursor: pointer;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background .12s ease, opacity .12s ease, transform .06s ease;
    }

    .btn:disabled {
      opacity: 0.4;
      cursor: default;
    }

    .btn:not(:disabled):hover {
      background: #111827;
      transform: translateY(-1px);
    }

    .btn:not(:disabled):active {
      transform: translateY(0);
    }

    .lock-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 11px;
      background: #022c22;
      color: #bbf7d0;
      border: 1px solid #22c55e;
      white-space: nowrap;
      cursor: default;
    }

    .lock-pill.insecure {
      background: #3f1f0a;
      color: #fed7aa;
      border-color: #f97316;
    }

    .lock-icon {
      font-size: 14px;
    }

    .lock-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
    }

    .lock-pill.insecure .lock-dot {
      background: #f97316;
    }

    #urlInput {
      flex: 1;
      min-width: 0;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #e5e7eb;
      font-size: 13px;
      outline: none;
    }

    #urlInput::placeholder {
      color: #6b7280;
    }

    /* Page */
    iframe {
      flex: 1;
      width: 100%;
      border: none;
      background: #020617;
    }

    @media (max-width: 640px) {
      .controls {
        flex-wrap: wrap;
      }
    }
  </style>
</head>
<body>
  <div class="browser">
    <!-- Tabs -->
    <div class="tabs-row" id="tabStrip"></div>

    <!-- Controls + URL -->
    <div class="controls">
      <div class="nav-buttons">
        <button class="btn" id="backBtn" title="Back">âŸµ</button>
        <button class="btn" id="forwardBtn" title="Forward">âŸ¶</button>
        <button class="btn" id="reloadBtn" title="Reload">âŸ³</button>
      </div>

      <div class="lock-pill" id="lockPill" title="This site is secure (HTTPS)">
        <span class="lock-icon" id="lockIcon">ðŸ”’</span>
        <span class="lock-dot"></span>
        <span id="lockText">secure</span>
      </div>

      <input id="urlInput" type="text" placeholder="Search or enter URL..." autocomplete="off" />
    </div>

    <!-- Page -->
    <iframe id="view" src="https://google.com"></iframe>
  </div>

  <script>
    const tabs = [];
    let activeTab = null;

    const tabStrip   = document.getElementById("tabStrip");
    const urlInput   = document.getElementById("urlInput");
    const view       = document.getElementById("view");
    const backBtn    = document.getElementById("backBtn");
    const forwardBtn = document.getElementById("forwardBtn");
    const reloadBtn  = document.getElementById("reloadBtn");
    const lockPill   = document.getElementById("lockPill");
    const lockIcon   = document.getElementById("lockIcon");
    const lockText   = document.getElementById("lockText");

    // ---------- Tabs ----------
    function createTab(initialUrl = "https://google.com") {
      const id = "tab-" + Math.random().toString(16).slice(2);
      const tab = {
        id,
        history: [initialUrl],
        index: 0,
        title: "New Tab",
      };
      tabs.push(tab);
      setActiveTab(id, false);
      renderTabs();
      load(initialUrl, false);
    }

    function setActiveTab(id, shouldLoad = true) {
      activeTab = tabs.find(t => t.id === id) || null;
      renderTabs();
      if (activeTab && shouldLoad) {
        const url = activeTab.history[activeTab.index];
        load(url, false);
      }
      updateButtons();
    }

    function closeTab(id) {
      const idx = tabs.findIndex(t => t.id === id);
      if (idx === -1) return;

      const closingActive = tabs[idx] === activeTab;
      tabs.splice(idx, 1);

      if (tabs.length === 0) {
        createTab("https://google.com");
      } else if (closingActive) {
        const nextIndex = Math.max(0, idx - 1);
        setActiveTab(tabs[nextIndex].id);
      } else {
        renderTabs();
      }
    }

    function renderTabs() {
      tabStrip.innerHTML = "";

      tabs.forEach(tab => {
        const btn = document.createElement("button");
        btn.className = "tab" + (tab === activeTab ? " active" : "");
        btn.dataset.tabId = tab.id;
        btn.innerHTML = `
          <span class="tab-title">${tab.title}</span>
          <span class="tab-close" data-close="true">Ã—</span>
        `;
        tabStrip.appendChild(btn);
      });

      const newBtn = document.createElement("button");
      newBtn.className = "tab-new";
      newBtn.textContent = "+";
      newBtn.title = "New Tab";
      newBtn.addEventListener("click", () => createTab("https://google.com"));
      tabStrip.appendChild(newBtn);
    }

    tabStrip.addEventListener("click", (e) => {
      const closeTarget = e.target.closest("[data-close]");
      if (closeTarget) {
        const tabEl = e.target.closest(".tab");
        if (!tabEl) return;
        const id = tabEl.dataset.tabId;
        closeTab(id);
        return;
      }

      const tabEl = e.target.closest(".tab");
      if (tabEl && tabEl.dataset.tabId) {
        setActiveTab(tabEl.dataset.tabId);
      }
    });

    // ---------- URL + navigation ----------
    function normalizeUrl(input) {
      input = (input || "").trim();
      if (!input) return "https://google.com";

      try {
        return new URL(input).toString();
      } catch {}

      if (/^[\w.-]+\.[a-z]{2,}$/i.test(input)) {
        return "https://" + input;
      }

      return "https://www.google.com/search?q=" + encodeURIComponent(input);
    }

    function updateButtons() {
      if (!activeTab) {
        backBtn.disabled = true;
        forwardBtn.disabled = true;
        reloadBtn.disabled = true;
        return;
      }
      backBtn.disabled = activeTab.index <= 0;
      forwardBtn.disabled = activeTab.index >= activeTab.history.length - 1;
      reloadBtn.disabled = activeTab.history.length === 0;
    }

    function updateSecurity(url) {
      const isSecure = url.startsWith("https://");
      lockPill.classList.toggle("insecure", !isSecure);
      lockIcon.textContent = isSecure ? "ðŸ”’" : "ðŸ”“";
      lockText.textContent = isSecure ? "secure" : "not secure";
      lockPill.title = isSecure
        ? "This site is secure (uses HTTPS)"
        : "This site is not fully secure (no HTTPS)";
    }

    function updateTabTitle(tab, url) {
      try {
        const u = new URL(url);
        tab.title = (u.hostname || "Page").replace(/^www\./, "");
      } catch {
        tab.title = "Page";
      }
      renderTabs();
    }

    function load(raw, addHistory = true) {
      if (!activeTab) return;

      const url = normalizeUrl(raw);
      view.src = url;
      urlInput.value = url;
      updateSecurity(url);

      if (addHistory) {
        activeTab.history.splice(activeTab.index + 1);
        activeTab.history.push(url);
        activeTab.index = activeTab.history.length - 1;
      }

      updateTabTitle(activeTab, url);
      updateButtons();
    }

    // ---------- Event handlers ----------
    backBtn.onclick = () => {
      if (!activeTab || activeTab.index <= 0) return;
      activeTab.index--;
      const url = activeTab.history[activeTab.index];
      load(url, false);
    };

    forwardBtn.onclick = () => {
      if (!activeTab || activeTab.index >= activeTab.history.length - 1) return;
      activeTab.index++;
      const url = activeTab.history[activeTab.index];
      load(url, false);
    };

    reloadBtn.onclick = () => {
      if (!activeTab) return;
      const url = activeTab.history[activeTab.index];
      load(url, false);
    };

    urlInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        load(urlInput.value, true);
      }
    });

    view.addEventListener("load", () => {
      // Page finished loading â€“ no extra UI, we keep it minimal
    });

    // ---------- Init ----------
    createTab("https://google.com");
  </script>
</body>
</html>
